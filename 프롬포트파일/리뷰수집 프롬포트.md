# 리뷰수집 프롬포트

Sequential Thinking MCP를 이용하여 아래 사항을 수행해

현재 캐치테이블에서 리뷰 데이터를 수집하려고 해

매일마다 리뷰데이터를 갱신할 수 있도록 코드를 만들거야

아래 사항을 고려해서 코드를 작성해줘

1. "캐치테이블_가게정보.csv"파일을 불러와 여기에는 “URL”컬럼에는 118개의 가게 정보가 들어가있어. 이제 “selenium”을 이용하여 URL에 접속 한 다음에 가게명과 현재 리뷰 개수를 얻어서 전 날과 비교한 뒤 리뷰 개수가 다르면 크롤링을 진행할거야 여기서 리뷰 개수는 "//*[@id="wrapperDiv"]/div[1]/div[1]/div[3]/div/span[3]”여기 안에 리뷰 개수로 해줘

2. 만약 리뷰 개수가 다르다면 아래와 같은 데이터를 수집하면 돼 컬럼명은 괄호 안에 있는 영문명으로 해줘
    
    가게명(restaurant), 작성자(reviewer), 리뷰날짜(review_date), 평점(reviewer_rating), 저녁인지 점심인지(day_night)
    

근데 여기서 주의할 게 있어  url에서 리뷰 페이지에 접근하기 위해서는 review를 추가해야되는데 이것은 “[https://app.catchtable.co.kr/ct/shop/tteoksan?type=DINING](https://app.catchtable.co.kr/ct/shop/tteoksan?type=DINING&foodKeywords=%EB%96%A1+%EC%82%B0&currentSuggestionType=SHOP_NAME)” 이러한 사이트가 존재할 때 “?type”앞에 “review”를 추가하면 해당 가게의 리뷰 페이지에 접근할 수 있어.

그리고 최신순으로 데이터를 수집하기위해서 URL 맨 뒤에 “&sortingFilter=D”를 추가해서 진행하면 돼

3. 그리고 현재 페이지는 무한스크롤 페이지로 되어있는데 사이트가 메모리를 아끼기 위해서 일정 스크롤을 내리면 전의 리뷰는 보지 못하게 만들어져 있는 거 같아. 거기다가 마우스를 창 한 가운데에 위치해야지 스크롤이 내려가. 이제 데이터를 수집한 뒤 PageDown을 이용하여 신중히 데이터를 수집하게 만들어줘 잘 모르겠으면 아래 코드를 참고해

```
        # 3. 스크롤 (가장 마지막 요소로 이동 -> PageDown x 2)
        if visible_cards:
            last_card = visible_cards[-1] # 현재 보이는 마지막 카드로 이동
            try:
                actions = ActionChains(driver)
                actions.move_to_element(last_card).perform()
                time.sleep(0.5)
                
                # PageDown 입력
                actions.send_keys(Keys.PAGE_DOWN).pause(0.5).send_keys(Keys.PAGE_DOWN).perform()
                
                time.sleep(1.5)
            except Exception as e:
                print(f"스크롤 중 에러: {e}")
                # 실패 시 body를 대상으로 시도
                body = driver.find_element(By.TAG_NAME, "body")
                body.send_keys(Keys.PAGE_DOWN)
                time.sleep(.5)
```

4. 데이터는 흑백요리사2 방영일인 2025년 12월 16일 기준으로해서 7일 전인 2025년 12월 9일부터 수집해줘

추가적으로 리뷰데이터를 수집할 때는 CSS 셀렉터를 이용해서 코드를 짜주고 각 변수별 CSS 셀렉터 위치는 아래와 같아.
가게명 : /#wrapperDiv > header > div > h2

작성자: #main > div.container.gutter-sm > div > div > div > div:nth-child(1) > article > div.__header > div.__user-info > a > h4 > span

평점: #main > div.container.gutter-sm > div > div > div > div:nth-child(1) > article > div.__header > div.__review-meta.__review-meta--with-rating > div > a > div

저녁인지 점심인지: #main > div.container.gutter-sm > div > div > div > div:nth-child(1) > article > div.__header > div.__review-meta.__review-meta--with-rating > div > p

리뷰날짜: #main > div.container.gutter-sm > div > div > div > div:nth-child(1) > article > div.__header > div.__review-meta.__review-meta--with-rating > span